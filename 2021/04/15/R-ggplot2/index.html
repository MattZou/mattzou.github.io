<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="&#34;auto&#34;"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png"><link rel="icon" href="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ico/favicon.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="description" content="
ggplot2使用总结，各种坑和技巧
"><meta name="author" content="MattZou"><meta name="keywords" content=""><title>ggplot2 总结 - Matt</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/themes/prism-okaidia.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/plugins/line-numbers/prism-line-numbers.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"mattzou.com",root:"/",version:"1.8.9a",typing:{enable:!0,typeSpeed:50,cursorChar:"|",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:2},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}}}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong><img style="margin-top:-.2em;width:15%" src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ico/favicon.jpg" srcset="/img/loading.gif" lazyload> MattZou</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/bb/"><i class="iconfont icon-speakernotes"></i> 想法</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-link-fill"></i> 友链</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" href="javascript:">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/README-example-1.png/bg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="ggplot2 总结"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2021-04-15 00:00" pubdate>2021年4月15日 凌晨</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 1.4k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 33 分钟 </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> 次</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">ggplot2 总结</h1><div class="markdown-body"><blockquote><p>ggplot2使用总结，各种坑和技巧</p></blockquote><span id="more"></span><h2 id="What-is-ggplot2"><a href="#What-is-ggplot2" class="headerlink" title="What is ggplot2"></a>What is ggplot2</h2><p><a target="_blank" rel="noopener" href="https://ggplot2.tidyverse.org/index.html"><strong>ggplot2</strong></a>是<a target="_blank" rel="noopener" href="https://www.tidyverse.org/">tidyverse</a>家族中进行数据可视化的核心package<br><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/tidyverse.jpg/pic" srcset="/img/loading.gif" lazyload><br>gg: <strong>Grammar of Graphics</strong></p><h2 id="How-to-use-ggplot2"><a href="#How-to-use-ggplot2" class="headerlink" title="How to use ggplot2"></a>How to use ggplot2</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r">install.packages<span class="token punctuation">(</span><span class="token string">"tidyverse"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div><p>搭配<a target="_blank" rel="noopener" href="https://www.rstudio.com/products/rstudio/">RStudio</a>食用更佳。</p><h3 id="功能速览"><a href="#功能速览" class="headerlink" title="功能速览"></a>功能速览</h3><ol><li>Rstudio提供一系列的<a target="_blank" rel="noopener" href="https://www.rstudio.com/resources/cheatsheets/">Cheatsheets</a>用于快速入门及核心功能速查，ggplot2部分可<a target="_blank" rel="noopener" href="https://github.com/rstudio/cheatsheets/raw/master/data-visualization-2.1.pdf">下载</a>。</li><li>各函数详细参数及示例参见<a target="_blank" rel="noopener" href="https://ggplot2.tidyverse.org/reference/index.html">Reference</a>。</li><li>ggplot2还支持<a target="_blank" rel="noopener" href="https://exts.ggplot2.tidyverse.org/gallery/">拓展包</a>，针对特殊功能，如<a target="_blank" rel="noopener" href="https://gganimate.com/">动态图片</a>、<a target="_blank" rel="noopener" href="https://github.com/jrnold/ggthemes">主题设定</a>、<a target="_blank" rel="noopener" href="https://github.com/aphalo/ggpmisc/">图表注释</a>、<a href="%5Bggstatsplot%5D(https://github.com/IndrajeetPatil/ggstatsplot)">增强型统计图表</a>等，拓展包提供了更好的封装，简化使用。</li></ol><h3 id="可视化理念"><a href="#可视化理念" class="headerlink" title="可视化理念"></a>可视化理念</h3><ul><li><p><strong>作者意图</strong></p><blockquote><p>All plots are composed of the <strong>data</strong>, the information you want to visualise, and a <strong>mapping</strong>, the description of how the data’s variables are mapped to aesthetic attributes.<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="ggplot2: elegant graphics for data analysis
">[1]</span></a></sup><br><a target="_blank" rel="noopener" href="http://hadley.nz/">Hadley Wickham</a></p></blockquote></li><li><p><strong>我的理解</strong><br>ggplot2，把图分为数据，几何图形，图形属性等几个部分，图的各个部分被定义为组件形式，组件实现数据与几何对象的映射，通过图形属性定义组件之间的组合形式进行绘图。</p><p>传统绘图按类绘图，抽象程度过高，导致绘制复杂对象（形态和数量）时不够灵活，ggplot2 降低了图的耦合度，将对象层级由类型图降低到图组件，虽然ggplot2 实现方式偏向于函数式编程，但每个函数操作的仍是单个图组件对象，这便于工程化时进行移植与复用。</p><p>如今主流可视化方案中都采用数据与几何对象映射的思想，这样又将图与数据进行了解耦合，对于定义好的映射关系，只要输入数据格式一定，图就可以自动匹配。因此将数据处理步骤与绘图进行隔离。</p></li></ul><h2 id="Tricks-and-Bugs"><a href="#Tricks-and-Bugs" class="headerlink" title="Tricks and Bugs"></a>Tricks and Bugs</h2><h3 id="Framework"><a href="#Framework" class="headerlink" title="Framework"></a>Framework</h3><p>个人习惯按以下核心框架绘图。</p><div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r">p <span class="token operator">&lt;-</span> 
 <span class="token comment"># 创建空白ggplot对象</span>
 ggplot<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
 <span class="token comment"># 添加一个或多个几何对象</span>
 <span class="token comment"># 个人不太喜欢把data和aes放在ggplot()里全局设置</span>
 <span class="token comment"># 如果多个几何对象分别使用不同数据源，指定全局设置会造成混乱</span>
 geom_point<span class="token punctuation">(</span>data <span class="token operator">=</span> <span class="token punctuation">,</span> aes<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
 <span class="token comment"># 设置坐标轴标题</span>
 labs<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
 <span class="token comment"># 设置坐标轴缩放</span>
 scale_x_continuous<span class="token punctuation">(</span>limits <span class="token operator">=</span> <span class="token punctuation">,</span> breaks <span class="token operator">=</span> <span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
 <span class="token comment"># 添加标注</span>
 annotate<span class="token punctuation">(</span><span class="token ellipsis">...</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
 <span class="token comment"># 设置主题样式</span>
 theme_bw<span class="token punctuation">(</span><span class="token ellipsis">...</span><span class="token punctuation">)</span> <span class="token operator">+</span> 
 <span class="token comment"># 覆写部分主题配置</span>
 theme<span class="token punctuation">(</span><span class="token ellipsis">...</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>各类图都可以在此模板基础上进行调整与自定义，详细配置建议参考<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="Function Reference
">[2]</span></a></sup>。</p><p>以下内容为我在日常使用中调整和配置的tricks。</p><h3 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h3><p>ggplot2 的典型结构如下，<code>panel</code>部分用于承载几何对象，其他每个部分都可单独设置。<br><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/structure.png/pic" srcset="/img/loading.gif" lazyload></p><h3 id="Geoms"><a href="#Geoms" class="headerlink" title="Geoms"></a>Geoms</h3><p>各种Geoms的实现方法官方示例十分详细，请<a target="_blank" rel="noopener" href="https://ggplot2.tidyverse.org/reference/index.html#section-layers">移步</a></p><div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># 查看设置点的形状</span>
ggpubr<span class="token operator">::</span>show_point_shapes<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 查看设置线的形状</span>
ggpubr<span class="token operator">::</span>show_line_types<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/pointtype.png/pic" srcset="/img/loading.gif" lazyload></div><div class="group-image-wrap"><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/linetype.jpg/pic" srcset="/img/loading.gif" lazyload></div></div><div class="group-image-row"></div></div><h3 id="Scales"><a href="#Scales" class="headerlink" title="Scales"></a>Scales</h3><ul><li><p><a href="https://mattzou.com/2019/11/23/ggplot2-Axis/">ggplot2 坐标轴调整</a></p></li><li><p><a href="https://mattzou.com/2020/07/16/ggplot2-Expression/">ggplot2 使用expression添加公式与数学符号</a></p></li><li><p><a href="https://mattzou.com/2019/11/23/ggplot2-Dual-Axis/">ggplot2 双坐标轴实现</a></p></li></ul><h3 id="Themes"><a href="#Themes" class="headerlink" title="Themes"></a>Themes</h3><p>用于调整<code>theme(...)</code>中的内容。</p><ul><li><p>背景色</p><div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># 无填充则设置为 element_blank()</span>
<span class="token comment"># 绘图区</span>
panel.background <span class="token operator">=</span> element_rect<span class="token punctuation">(</span>fill<span class="token punctuation">,</span> color<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment"># 绘图区外侧</span>
plot.background <span class="token operator">=</span> element_rect<span class="token punctuation">(</span>fill<span class="token punctuation">,</span> color<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></li><li><p>网格线</p><div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># 主网格</span>
panel.grid.major <span class="token operator">=</span> element_line<span class="token punctuation">(</span>colour<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span>
<span class="token comment"># 次网格</span>
panel.grid.minor <span class="token operator">=</span> element_line<span class="token punctuation">(</span>colour<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token ellipsis">...</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></li><li><p>绘图边距<br>查看默认绘图边距<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="r - 默认的ggplot2绘图边距是多少?
">[3]</span></a></sup>，其他边距内容参见<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="R语言基础绘图之边距参数
">[4]</span></a></sup></p><div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># 默认主题</span>
theme_grey<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">$</span>plot.margin
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">5.5</span>pt <span class="token number">5.5</span>pt <span class="token number">5.5</span>pt <span class="token number">5.5</span>pt
<span class="token comment"># 其他主题（推荐）</span>
theme_get<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">$</span>plot.margin <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></li><li><p><a href="https://mattzou.com//2020/07/14/ggplot2-Legend/">ggplot2 调整图例</a></p></li></ul><h3 id="Color"><a href="#Color" class="headerlink" title="Color"></a>Color</h3><p><a href="https://mattzou.com/2019/04/21/ggplot2-Color/">ggplot2 颜色配置</a></p><h3 id="Font"><a href="#Font" class="headerlink" title="Font"></a>Font</h3><p>绘图使用<code>Times New Roman</code>字体。</p><ol><li>定义字体样式<div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r">windowsFonts<span class="token punctuation">(</span>RMN <span class="token operator">=</span> windowsFont<span class="token punctuation">(</span><span class="token string">"Times New Roman"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></li><li>在需要设置字体的位置设置<code>family</code>属性<div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r">family <span class="token operator">=</span> <span class="token string">"RMN"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></li></ol><h3 id="Facetting"><a href="#Facetting" class="headerlink" title="Facetting"></a>Facetting</h3><p><a href="https://mattzou.com/2019/07/03/ggplot2-Facet/">ggplot2 分面绘图</a></p><h3 id="Annotations"><a href="#Annotations" class="headerlink" title="Annotations"></a>Annotations</h3><p><a href="https://mattzou.com/2020/10/21/ggplot2-Annotation/">ggplot2 添加注释</a></p><h3 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h3><p>ggplot2 多图组合主要通过<code>grid</code>等一系列包实现<sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="Laying out multiple plots on a page
">[5]</span></a></sup>。<br><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/gridExtra.png/pic" srcset="/img/loading.gif" lazyload><br>规则排列</p><div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># 并排多图，nrow指定图像排列行数</span>
p <span class="token operator">+</span> grid.arrange<span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> nrow <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment"># 多图不规则排列，将需要排列的图像加入列表 gl，通过layout_matrix指定排列形式</span>
p <span class="token operator">+</span> grid.arrange<span class="token punctuation">(</span>
  grobs <span class="token operator">=</span> gl<span class="token punctuation">,</span>
  widths <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  layout_matrix <span class="token operator">=</span> rbind<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">NA</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        c<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/ggplot2-mixing-multiple-plots-common-legend-data-visualization-1.png/pic" srcset="/img/loading.gif" lazyload></div><div class="group-image-wrap"><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/layout_matrix.png/pic" srcset="/img/loading.gif" lazyload></div></div><div class="group-image-row"></div></div><p>对于重叠图可以使用<code>annotation_custom</code>，指定子图排布位置。</p><div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r"><span class="token comment"># g 是子图元素</span>
p <span class="token operator">+</span> annotation_custom<span class="token punctuation">(</span>
    grob <span class="token operator">=</span> g<span class="token punctuation">,</span>
    <span class="token comment"># 定位坐标，左下右上点</span>
    xmin <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    xmax <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    ymin <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
    ymax <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>图像输出直接使用<code>ggsave()</code><sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="Save a ggplot (or other grid object) with sensible defaults
">[6]</span></a></sup></p><div class="code-wrapper"><pre class="line-numbers language-r" data-language="r"><code class="language-r">ggsave<span class="token punctuation">(</span>
  <span class="token comment"># 图像名称</span>
  filename<span class="token punctuation">,</span>
  <span class="token comment"># 图对象</span>
  plot<span class="token punctuation">,</span>
  width <span class="token operator">=</span> <span class="token keyword">NA</span><span class="token punctuation">,</span>
  height <span class="token operator">=</span> <span class="token keyword">NA</span><span class="token punctuation">,</span>
  units <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"in"</span><span class="token punctuation">,</span> <span class="token string">"cm"</span><span class="token punctuation">,</span> <span class="token string">"mm"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment"># 分辨率</span>
  dpi <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">,</span>
  <span class="token comment"># 对于tiff类型图像，建议加入此选项压缩图片</span>
  compression <span class="token operator">=</span> <span class="token string">"lzw"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div><p>Elsevier推荐出图尺寸，可以据此调整<code>width</code><br><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/Elsevier.png/pic" srcset="/img/loading.gif" lazyload></p><h2 id="Note"><a href="#Note" class="headerlink" title="Note"></a>Note</h2><ul><li><p>ggplot2 提供了强大的自定义功能，可以通过长期使用形成适应自己研究体系的绘图模板，方便绘图的标准化，未来使用时可将更多精力放在数据处理上。</p></li><li><p>但更高的灵活度意味着简单功能可能也需要复杂代码实现（或者根本实现不了，需要绕路😂），如果折腾精力不够，建议简单图还是使用传统绘图软件。</p></li><li><p>对于特别复杂的图，各种高端炫酷的以及3D类还是建议AI+PS（懂得都懂😏）、地理空间类则建议使用<code>Python</code>的<a target="_blank" rel="noopener" href="https://geopandas.org/">Geopandas</a>，机器学习类的图也是<code>Python</code>提供的轮子更多。</p></li><li><p>交互类图表不是ggplot2擅长的地方，特别是用于RMarkdown文档展示的图，推荐使用各种图表js的R版本实现，ggplot2还是老老实实做静态图片吧。<a href="https://mattzou.com/2016/09/26/%E2%80%9C%E5%85%AC%E7%9B%8A%E4%BA%91%E5%9B%BE%E2%80%9D%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%9B%E6%96%B0%E5%A4%A7%E8%B5%9B%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/">这里</a>有我远古时期在全R环境下实现的交互式网页，动态图还是用前端工具做吧😂</p></li></ul><blockquote><p>ggplot2 虽好， 可不要贪杯🍻哦</p></blockquote><h2 id="Acknowledgements"><a href="#Acknowledgements" class="headerlink" title="Acknowledgements"></a>Acknowledgements</h2><a href="https://mattzou.com/2021/04/15/R-ggplot2/#Acknowledgements" class="card-body hover-with-bg" target="_blank" rel="noopener"><div class="card-content"><div class="link-avatar my-auto"><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/%E7%8C%B4%E5%AD%90%E5%A5%B3%E7%8E%8B.jpg" srcset="/img/loading.gif" lazyload alt="" onerror='this.onerror=null,this.srcset=null,this.src=""'></div><div class="link-text"><div class="link-title">🐒👑</div><div class="link-intro"></div></div></div></a><a href="https://mattzou.com/2021/04/15/R-ggplot2/#Acknowledgements" class="card-body hover-with-bg" target="_blank" rel="noopener"><div class="card-content"><div class="link-avatar my-auto"><img src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ggplot2/%E6%96%87%E4%BB%B6%E4%BC%A0%E5%81%B7%E5%8A%A9%E7%90%86.jpg" srcset="/img/loading.gif" lazyload alt="" onerror='this.onerror=null,this.srcset=null,this.src=""'></div><div class="link-text"><div class="link-title">文件传偷助理</div><div class="link-intro"></div></div></div></a><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://ggplot2-book.org/index.html">ggplot2: elegant graphics for data analysis</a> <a href="#fnref:1" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://ggplot2.tidyverse.org/reference/index.html">Function Reference</a> <a href="#fnref:2" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://www.coder.work/article/6542920">r - 默认的ggplot2绘图边距是多少?</a> <a href="#fnref:3" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5fbaf17d9aee">R语言基础绘图之边距参数</a> <a href="#fnref:4" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://cran.r-project.org/web/packages/egg/vignettes/Ecosystem.html">Laying out multiple plots on a page</a> <a href="#fnref:5" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:6" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://ggplot2.tidyverse.org/reference/ggsave.html">Save a ggplot (or other grid object) with sensible defaults</a> <a href="#fnref:6" rev="footnote" class="footnote-backref">↩</a></span></span></li></ol></div></section></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/%E7%9B%AE%E5%BD%95/">目录</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/ggplot2/">ggplot2</a></div></div><p class="note note-info">本文最后更新于：2021年4月28日 晚上</p><p class="note note-warning"><a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://mattblog.oss-cn-beijing.aliyuncs.com/img/ico/cc.png" srcset="/img/loading.gif" lazyload></a>本作品采用<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/2021/04/20/%E9%81%A5%E6%84%9F%E4%BA%91%E5%B9%B3%E5%8F%B0/"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">遥感云平台</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2021/04/10/Env-PPT%E7%B3%BB%E7%BB%9F/"><span class="hidden-mobile">😏PPT系统🤣</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments" lazyload><script>Fluid.utils.lazyComments("comments",function(){var t="github-light",e="github-dark",i="dark"===(i=document.documentElement.getAttribute("data-user-color-scheme"))?e:t;window.UtterancesThemeLight=t,window.UtterancesThemeDark=e;e=document.createElement("script");e.setAttribute("src","https://utteranc.es/client.js"),e.setAttribute("repo","MattZou/mattzou.github.io"),e.setAttribute("issue-term","title"),e.setAttribute("label","utterances"),e.setAttribute("theme",i),e.setAttribute("crossorigin","anonymous"),document.getElementById("comments").appendChild(e)})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="footer-content"><div><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("02/26/2016 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="🚀 &nbsp"+dnum+"&nbsp天",document.getElementById("times").innerHTML=hnum+"&nbsp小时&nbsp"+mnum+"&nbsp分&nbsp"+snum+"&nbsp秒"}setInterval("createtime()",250)</script></div></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/js/debouncer.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t){(0,Fluid.plugins.typing)(t.getElementById("subtitle").title)}((window,document))</script><script src="/js/local-search.js"></script><script>$("#local-search-input").on("click",function(){searchFunc("/local-search.xml","local-search-input","local-search-result")}),$("#modalSearch").on("shown.bs.modal",function(){$("#local-search-input").focus()})</script><script src="/js/boot.js"></script></body></html>